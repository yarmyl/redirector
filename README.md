# redirector

## Предназначение и алгоритм:

Подпрограмма для squid. Формирует 2 словаря. Если домен URL попадает на первый, то сверяем со списком запрещенных ссылок, иначе сверяем со славарем запрещенных доменов. Словарь с указанной периодчиностью перечитывается.

## Использование:

Необходимо 3 списка:
* *dom.list* - список реверсных доменов, которые подлежат редиректу;
* *url.list* - список regexp ссылок, которые подлежат редиректу;
* *white_dom.list* - список реверсных доменов, которые подлежат проверке по ссылкам.

## Вызов:

./redirector.py

### Ключи вызова:

--url - url для редиректа (у меня --url http://<какой-то домен>/?redirect=);
--t - время в минутах для переформирования словаря.

## Пример внедрения в squid:

url_rewrite_access allow Safe_ports
url_rewrite_program /home/redirector/redirector.py --url "http://<какой-то домен>/?redirect=" --t 10
url_rewrite_children 50
